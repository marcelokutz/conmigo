!function(l){"use strict";l(document).ready(function(){var a,e,t,p,d,i;l(".wpex-checkbox").click(function(){l(".wpex-theme-panel-updated").show()}),l('.wpex-theme-panel .manage-right input[type="text"]').change(function(){l(".wpex-theme-panel-updated").show()}),l(".wpex-theme-panel-updated a").click(function(e){e.preventDefault(),l("#wpex-theme-panel-form #submit").click()}),l(".wpex-checkbox").change(function(){var e=l(this).parent("th").parent(".wpex-module");e.hasClass("wpex-disabled")?e.removeClass("wpex-disabled"):e.addClass("wpex-disabled")}),l(".wpex-theme-panel-module-link").click(function(){l(".wpex-theme-panel-updated").show();var e=l(this),a=e.attr("href"),t=l(a).find(".wpex-checkbox"),i=e.parents(".wpex-module");return t.is(":checked")?t.attr("checked",!1):t.attr("checked",!0),i.hasClass("wpex-disabled")?i.removeClass("wpex-disabled"):i.addClass("wpex-disabled"),!1}),(a=l(".wpex-filter-active button")).click(function(){var e=l(this).data("filter-by");return a.removeClass("active"),l(this).addClass("active"),l(".wpex-module").removeClass("wpex-filterby-hide"),"active"===e?l(".wpex-module").each(function(){l(this).hasClass("wpex-disabled")&&l(this).addClass("wpex-filterby-hide")}):"inactive"===e&&l(".wpex-module").each(function(){l(this).hasClass("wpex-disabled")||l(this).addClass("wpex-filterby-hide")}),!1}),l(".wpex-theme-panel-sort a").click(function(){var e=l(this).data("category");return l(".wpex-theme-panel-sort a").removeClass("wpex-active-category"),l(this).addClass("wpex-active-category"),"all"===e?l(".wpex-module").removeClass("wpex-sort-hide"):(l(".wpex-module").addClass("wpex-sort-hide"),l(".wpex-category-"+e).each(function(){l(this).removeClass("wpex-sort-hide")})),!1}),e=l(".wpex-module.wpex-active").length,t=l(".wpex-module.wpex-disabled").length,l(".wpex-active-items-btn > span").text("("+e+")"),l(".wpex-inactive-items-btn > span").text("("+t+")"),l("a#wpex-help-toggle").click(function(){return l("#wpex-notice").toggle(),!1}),void 0!==l.fn.chosen&&(l(".wpex-chosen").chosen(),l(".wpex-chosen-multiselect").chosen({search_contains:!0}),l("#wpex_header_builder_select_chosen, #wpex_footer_builder_select_chosen").css("width","300")),void 0!==l.fn.wpColorPicker&&l(".wpex-color-field").wpColorPicker(),function(){var i=l(".wpex-panel-js-tabs a");if(i.length){var e=l(".wpex-panel-js-tabs a.nav-tab-active").attr("href").substring(1);l(".wpex-"+e).show(),l(i).each(function(){var t=l(this);t.click(function(e){e.preventDefault(),i.removeClass("nav-tab-active"),t.addClass("nav-tab-active");var a=l(this).attr("href").substring(1);l(".wpex-tab-content").hide(),l(".wpex-"+a).show()})})}}(),p=!0,d=wp.media.editor.send.attachment,l(".wpex-media-upload-button").click(function(){wp.media.editor.send.attachment;var n=l(this),c=n.prev();return wp.media.editor.send.attachment=function(e,a){if(!p)return d.apply(this,[e,a]);l(c).val(a.id);var t=n.parent().find(".wpex-media-live-preview img"),i=n.parent().find(".wpex-media-remove");if(i.length&&i.show(),t.length)t.attr("src",a.url);else{var s=(t=n.parent().find(".wpex-media-live-preview")).data("image-size")?t.data("image-size"):"auto";t.append('<img src="'+a.url+'" style="height:'+s+"px;width:"+s+'px;" />')}},wp.media.editor.open(n),!1}),l(".add_media").on("click",function(){p=!1}),l(".wpex-media-remove").each(function(){var e=l(this),a=e.parent().find(".wpex-media-input"),t=a.val(),i=e.parent().find(".wpex-media-live-preview");t&&e.show(),e.on("click",function(){return a.val(""),i.find("img").remove(),e.hide(),!1})}),(i=l("#wpex-theme-license-form")).length&&i.submit(function(e){e.preventDefault();var a=l(this),t=a.find("#submit"),i=a.find(".wpex-spinner"),s=t.hasClass("activate")?"activate":"deactivate",n=a.find("input#wpex_license"),c=a.find("input#wpex_dev_license");l(".wpex-admin-ajax-notice").hide().removeClass("notice-warning updated notice-error"),l.ajax({type:"POST",url:ajaxurl,data:{action:"wpex_theme_license_form",process:s,license:a.find("input#wpex_license").val(),devlicense:c.is(":checked")?"checked":0,nonce:a.find("input#wpex_theme_license_form_nonce").val()},beforeSend:function(){i.css("opacity","1"),t.prop("disabled",!0)},success:function(e){i.css("opacity","0"),t.prop("disabled",!1),e.success&&(c.parent().hide(),"activate"===s?(n.attr("readonly","readonly"),t.removeClass("activate").addClass("deactivate").val(t.data("deactivate"))):"deactivate"===s&&(n.attr("placeholder","").removeAttr("readonly"),n.val(""),t.removeClass("deactivate").addClass("activate").val(t.data("activate")),location.reload())),e.message&&l(".wpex-admin-ajax-notice").addClass(e.messageClass).html("<p>"+e.message+"</p>").show()}})}),l(".wpex-custom-css-panel-wrap .form-table").click(function(){l(".wpex-remember-to-save").show()}),l(".wpex-custom-css-panel-wrap .wpex-remember-to-save a").click(function(e){e.preventDefault(),l(".wpex-custom-css-panel-wrap form #submit").click()}),l("#wpex-dashicon-select a").click(function(){return l("#wpex-dashicon-select a.button-primary").removeClass("button-primary").addClass("button-secondary"),l(this).addClass("button-primary"),l(this).parents("#wpex-dashicon-select").next("input").val(l(this).data("value")),!1})})}(jQuery);